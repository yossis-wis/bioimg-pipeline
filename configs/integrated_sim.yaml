# Integrated Slice: Nuclei Segmentation + Spot Detection (Simulated)

input_relpath: raw_staging/phantom_integrated.tif
output_runs_dir: runs

# Input Channels (1-based)
# channel_spots can be a list, e.g. [2, 3]
channel_nuclei: 1
channel_spots: 2
# Optional: restrict spot detection to a boolean mask (nonzero = valid)
# valid_mask_relpath: raw_staging/my_valid_mask.tif

# --- Nuclei Segmentation (StarDist) ---
# Path relative to BIOIMG_DATA_ROOT
stardist_model_dir: models/y22m01d12_model_0
nuc_prob_thresh: 0.5
nuc_nms_thresh: 0.3

# --- Spot Detection (LoG) ---
spot_pixel_size_nm: 65
spot_lambda_nm: 667
spot_zR: 344.5
spot_se_size: 15        # local-max neighborhood size (px)
spot_q_min: 1.0         # LoG quality threshold (q_min)
spot_u0_min: 30

# --- Visual QC ---
qc_cutout_size: 80
qc_max_cutouts: 50
qc_montage_cols: 10
# qc_sample_seed: 0

# --- Simulation Params (for generate_phantom_tiff.py) ---
sim_height: 512
sim_width: 512
sim_num_nuclei: 15
sim_num_spots: 100
sim_seed: 42
